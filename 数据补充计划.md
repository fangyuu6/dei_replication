# 数据补充计划：解决外部验证数据不足问题

## 一、问题诊断

### 当前数据源状况

| 数据源 | 菜品数 | 总提及量 | 每菜中位数 | ρ vs Yelp | 显著? | 问题 |
|--------|--------|----------|-----------|-----------|-------|------|
| **Yelp** (主) | 158 | 76,927 | ~500 | — | — | 基准，无问题 |
| **Google Local** | 157 | 653,866 | 746 | 0.697 | ✅ | 尚可，但提取流程需改进 |
| **TripAdvisor** | 157 | 1,354,515 | 2,294 | 0.595 | ✅ | 全为国际城市，非美国 |
| **Food.com** | 110 | 11,467 | 46 | 0.113 | ❌ | 家庭食谱评分≠餐厅体验 |
| **Food-Pics** | 25 | 66 | 2 | 0.175 | ❌ | 图片评分，n极小 |
| **CroCoFiD** | 11 | 17 | 1 | -0.345 | ❌ | 几乎无用 |
| **ASAP** (中文) | 0 | 36,850 | — | — | — | 未整合，中文评论 |

### 核心争议点

1. **Food.com / Food-Pics / CroCoFiD 完全不显著**：论文声称"cross-platform validation"，但实际上只有 Google 和 TripAdvisor 两个有效验证源
2. **概念不等价**：Food.com 是家庭食谱评分，Food-Pics 是视觉评分——与餐厅用餐体验完全不同维度
3. **n 太小**：Food-Pics 仅 25 道菜/66条评分，CroCoFiD 仅 11 道菜/17条——统计检验力不足
4. **Google Local 数据质量存疑**：原始文件 113MB JSON，提取流程未充分文档化
5. **TripAdvisor 地域偏差**：数据来自伦敦/纽约/巴黎/巴塞罗那/马德里/新德里，非美国本土，与 Yelp 的美国样本地理不匹配

### 图表展示问题（审稿高风险）

**Figure S16（cross_platform_h_validation.png）严重误导**：
- caption 声称展示 "Yelp H versus Google Local and TripAdvisor"
- 但实际图是 2×3 网格，**上排 3 个子图全是不显著的弱数据源**：
  - Food.com: ρ=0.113, N=110（散点云，无趋势）
  - CroCoFiD: ρ=-0.345, N=11（**负相关！仅 11 个点**）
  - Food-Pics: ρ=0.175, N=25（几乎水平）
- 下排 2 个才是有效验证：Google (ρ=0.697) 和 TripAdvisor (ρ=0.595)
- **审稿人第一眼看到的是上排 3 个失败的图，直觉反应是 "validation failed"**

**H 评分方法不一致**：
- Yelp 的 H 用的是 finetuned BERT（NLP 情感分析）
- Google/TripAdvisor 的 H 用的是**原始星级评分 ×2 映射到 1-10**（`07c` 代码 L421, L459）
- 这意味着跨平台相关检验的不是"同一 NLP 管线在不同数据上的一致性"，而是"BERT NLP H vs 原始星级"
- 正文写的是 "entirely independent review corpora processed through the same NLP pipeline"——这是**不正确的**

**必须修正**：
1. 将图分拆为两张：convergent validity（Google + TA）和 discriminant validity（Food.com + Food-Pics + CroCoFiD）
2. 或者只在正文图中展示 Google + TA，弱数据源移到补充材料并重新框架化
3. Google/TripAdvisor 用 finetuned BERT 重新评分（与 Yelp 同管线），使 "same NLP pipeline" 的表述变为事实

---

## 二、补充策略

### 策略 A：深化现有强数据源（优先级最高）

#### A1. Google Local 数据增强（关键修正）
- **当前**：113 MB JSON，653K 提及量，但 H 是原始星级×2（非 BERT NLP）
- **问题**：正文声称 "processed through the same NLP pipeline"，但实际 Google H = rating × 2
- **改进**：
  1. **必须**：用 finetuned BERT 对 Google 评论文本重新评分（提取菜品上下文窗口 → BERT → 真正的 NLP H）
  2. 增加菜品别名覆盖，提升匹配率
  3. 分城市计算 H，报告城市级一致性（类似 Yelp 的地理稳定性分析）
  4. 与 Yelp 做菜品级对齐散点图 + Bland-Altman 图
  5. 同时报告"BERT H vs BERT H"和"BERT H vs 原始星级"两组相关，展示 NLP 提取的增量价值
- **预期**：BERT-BERT 相关 ρ 可能比现有的 BERT-星级 ρ=0.697 更高或更低，但这是方法论上正确的验证

#### A2. TripAdvisor 数据增强（关键修正）
- **当前**：2.4 GB 原始评论，1.35M 提及量，但 H 同样是原始星级×2（非 BERT NLP）
- **问题**：与 A1 相同——需要真正的 NLP 管线一致性
- **改进**：
  1. **必须**：用 finetuned BERT 对 TripAdvisor 评论文本重新评分
  2. 报告按城市分层的 H 差异（跨文化味觉偏好分析）
  3. 将 TripAdvisor 纳入 within-category 和 meal-level 分析
  4. 做三平台 (Yelp × Google × TA) 的 Cronbach's α 或 ICC
- **预期**：BERT-BERT ρ 可能在 0.55-0.75 区间；关键是使方法论声明真实

#### A3. 三平台聚合 H
- 对同时出现在 Yelp + Google + TripAdvisor 的 157 道菜，计算：
  - 加权平均 H（按提及量加权）
  - 三平台 ICC (intraclass correlation coefficient)
  - 用聚合 H 重算 DEI，报告与单平台 DEI 的 ρ
- **意义**：展示 H 测量的跨平台收敛效度

### 策略 B：新增高质量外部数据源

#### B1. Yelp Fusion API 补充（推荐）
- **目标**：获取菜品级评分数据（Yelp 的 "Popular Dishes" 功能带有独立评分）
- **方法**：Yelp Fusion API → Business Search → 热门菜品
- **优势**：与主数据源同平台，直接验证 BERT H 与用户显式评分的一致性
- **限制**：API 调用限额，需评估成本

#### B2. DoorDash/UberEats 菜品评分（推荐）
- **目标**：外卖平台有菜品级独立评分（thumbs up/down 或星级）
- **方法**：公开数据或 API 采集
- **优势**：菜品级评分（非餐厅级），概念上最接近我们的 H
- **限制**：可能需要网页抓取，数据获取合规性需确认

#### B3. Zomato 评论数据
- **目标**：Zomato 是印度/东南亚最大的餐厅评论平台
- **优势**：覆盖 Yelp 薄弱的亚洲/中东菜系
- **可用数据**：Kaggle 上有多个 Zomato 数据集（评论+评分）
- **方法**：与 Yelp 同流程提取菜品提及 → BERT 评分

#### B4. 大众点评 / ASAP 整合
- **当前**：已有 ASAP 数据集 36,850 条中文评论，带 `Food#Taste` 标签
- **改进**：
  1. 提取菜品提及（中文 NLP）
  2. `Food#Taste` 列本身就是人工标注的美味度维度
  3. 跨语言/跨文化验证：中文评论的 H 排名是否与英文一致？
- **意义**：Nature 级别论文需要跨文化验证

### 策略 C：修正论文叙事（与数据增强并行）

#### C1. 重新定位弱相关数据源
当前论文将 Food.com (ρ=0.113) 和 Food-Pics (ρ=0.175) 列为"weaker correlations"，但未充分解释为什么它们应该相关。

**修正方案**：
- Food.com / Food-Pics / CroCoFiD 不应称为"cross-platform validation"
- 改为"discriminant validity"(区分效度)——预期低相关，因为测量的是不同构念
- 构建 Campbell & Fiske (1959) 的 MTMM (Multitrait-Multimethod) 矩阵：
  - 同一构念不同方法（Yelp vs Google vs TA）→ 高相关 ✅
  - 不同构念不同方法（Yelp vs Food-Pics）→ 低相关 ✅

#### C2. 删除不可信的声明
- **价格分层分析**：已修正（无价格数据）
- **跨平台 refinement elasticity**：三平台 α 值不一致 (0.35 / 0.12 / -0.02)，应明确标注为 inconclusive

### 策略 D：人工标注验证（Nature 级必需）

#### D1. 众包味觉评分（200 道菜）
- **样本**：已生成 `results/tables/human_validation_sample.csv`
- **方法**：
  1. Prolific/MTurk 招募 100 名美国受试者
  2. 每人评 40 道菜的味觉期望（1-10），基于菜名+图片+简短描述
  3. 每道菜至少 20 个评分 → ICC + Krippendorff's α
  4. 将众包 H 与 BERT H 做 ρ
- **预期成本**：~$500-1000（Prolific 费率 $8/hr，每人 15 min）
- **预期结果**：若 ρ > 0.5 → BERT H 的构念效度得到确认

#### D2. 专家品尝面板（最高证据级别）
- **方法**：招募 10 名食品科学/美食评论专家，盲评 50 道菜
- **意义**：直接回应"在线评论不等于真实味觉体验"的审稿意见
- **限制**：成本高，物流复杂

---

## 三、优先级排序与实施路线

### Phase 1（立即可做，1-2 周）

| 任务 | 脚本 | 预计时间 |
|------|------|----------|
| A1: Google 用 finetuned BERT 重评 | `16a_google_rescore.py` | 2-3 小时 |
| A2: TripAdvisor 用 finetuned BERT 重评 | `16b_ta_rescore.py` | 3-4 小时 |
| A3: 三平台 ICC + 聚合 H | `16c_multiplatform_aggregation.py` | 30 分钟 |
| C1: 重写论文 cross-platform 段落为 MTMM | 手动编辑 | 2 小时 |
| B4: ASAP 中文评论整合 | `16d_asap_integration.py` | 2-3 小时 |

### Phase 2（需获取新数据，2-4 周）

| 任务 | 方法 | 预计时间 |
|------|------|----------|
| B3: Zomato Kaggle 数据 | 下载 + 处理 | 1 天 |
| D1: 众包味觉评分 | Prolific 部署 | 1 周等待 |
| B1: Yelp Fusion API | API 调用 | 2-3 天 |

### Phase 3（长期，投稿后 R&R）

| 任务 | 方法 |
|------|------|
| D2: 专家面板 | 实验室实验 |
| B2: DoorDash/UberEats | 数据获取谈判 |

---

## 四、预期改善效果

| 指标 | 当前 | Phase 1 后 | Phase 2 后 |
|------|------|-----------|-----------|
| 有效验证平台数 | 2 (Google, TA) | 3-4 (+ASAP, 重评后质量提升) | 5+ (+Zomato, 众包) |
| 最强跨平台 ρ | 0.697 (Google) | 0.75+ (Google重评) | 0.80+ (聚合H) |
| 人工验证 | 无 | 无 | ρ ~0.5+ (众包) |
| MTMM 矩阵 | 无 | 完整 2×3 矩阵 | 完整 3×5 矩阵 |
| 跨文化验证 | 无 | ASAP 中文 | +Zomato 印度 |

---

## 五、对论文具体章节的影响

### 需要修改的段落

1. **Abstract**: "cross-validating... across independent review platforms" → 明确列出有效平台
2. **Results §2.7 (Cross-platform)**: 当前混合报告强弱数据源 → 分为"convergent validity"和"discriminant validity"两段
3. **Discussion §4.3 (Limitations)**: 增加关于 Food.com/Food-Pics 为何不该相关的理论解释
4. **Methods §6.3**: 增加 MTMM 框架描述
5. **Supplement S10**: 增加 MTMM 矩阵表格 + ASAP 跨文化结果

### 需要新增的图表

- **Supplementary Table SX**: Campbell-Fiske MTMM 矩阵
- **Supplementary Figure SX**: 三平台聚合 H 的 Bland-Altman 图
- **Supplementary Figure SX**: ASAP 中文 H vs Yelp 英文 H 散点图（如可匹配菜品）
